<script language="javascript" type="text/javascript">
{include file="form_js.html"}
</script>

{if $registration == 'pending'}
<div class="divtable shade1">
<form action="{url _base=$PHP_SELF}" method="POST">
<input name="ref" value="{$ref|escape}" type="hidden" />
	<div class="table-hdr">
		<h3><#User Registration Form#></h3>
		<p>
			<!--#REGISTRATION_BLURB1#-->
			In order to login you must register a username and link it with your player. The unique ID
			given for your player must already exist in the stats or registration will fail. 
			This means you must have logged into the game server at least once before attempting to register.
		</p>
		<br/>
		<p>
			{if $conf.registration == 'open'}
			<!--#REGISTRATION_OPEN_BLURB#-->
			We have an "open" registration policy. 
			Once registered you will have instant access to your account and will be logged in automatically.
			{elseif $conf.registration == 'closed'}
			<!--#REGISTRATION_CLOSED_BLURB#-->
			We are not currently allowing any new registrations at this time.
			{elseif $conf.registration == 'confirm'}
			<!--#REGISTRATION_CONFIRM_BLURB#-->
			We have a strict registration policy. 
			An administrator will receive your registration and will need to approve it before you may
			login to your account.
			{elseif $conf.registration == 'autoconfirm'}
			<!--#REGISTRATION_AUTOCONFIRM_BLURB#-->
			We have a strict registration policy that requires you to confirm your account from the game server. 
			Once registered you will need to login to the game server and confirm your registration with the
			following registration command using the game console: <em>ps_confirm</em>
			{/if}
		</p>
	</div>
	<div class="row{if $form.uniqueid.error} row-err{/if}">
		<span onmouseover="statusText('{$form.uniqueid.statustext|escape:'quotes'}')" onmouseout="notext()" class="label">{$form.uniqueid.label}</span>
		<span class="input"><input name="uniqueid" value="{$uniqueid|escape}" type="text" size="40" class="field" />{if $form.uniqueid.error}<p class="err">{$form.uniqueid.error}</p>{/if}</span>
	</div>
	<div class="row-spacer"></div>
	<div class="row{if $form.username.error} row-err{/if}">
		<span onmouseover="statusText('{$form.username.statustext|escape:'quotes'}')" onmouseout="notext()" class="label">{$form.username.label}</span>
		<span class="input"><input name="username" value="{$username|escape}" type="text" size="40" class="field" />{if $form.username.error}<p class="err">{$form.username.error}</p>{/if}</span>
	</div>
	<div class="row{if $form.password.error} row-err{/if}">
		<span onmouseover="statusText('{$form.password.statustext|escape:'quotes'}')" onmouseout="notext()" class="label">{$form.password.label}</span>
		<span class="input"><input name="password" value="" type="password" size="40" class="field" />{if $form.password.error}<p class="err">{$form.password.error}</p>{/if}</span>
	</div>
	<div class="row{if $form.password2.error} row-err{/if}">
		<span onmouseover="statusText('{$form.password2.statustext|escape:'quotes'}')" onmouseout="notext()" class="label">{$form.password2.label}</span>
		<span class="input"><input name="password2" value="" type="password" size="40" class="field" />{if $form.password2.error}<p class="err">{$form.password2.error}</p>{/if}</span>
	</div>
	<div class="row-spacer"></div>
	<div class="row{if $form.email.error} row-err{/if}">
		<span onmouseover="statusText('{$form.email.statustext|escape:'quotes'}')" onmouseout="notext()" class="label">{$form.email.label}</span>
		<span class="input"><input name="email" value="{$email|escape}" type="text" size="40" class="field" /> (<#optional#>)
		{if $form.email.error}
			<p class="err">{$form.email.error}</p>
		{else}
			{if $conf.registration != 'open'}
				<p><#Enter your email address if you want to receive an email when your registration is confirmed#></p>
			{/if}
		{/if}
		</span>
	</div>
	<div class="row-spacer"></div>
	<div class="row">
		<div class="form-actions">
			<input name="submit" value="<#Submit Registration#>" type="submit" class="btn" />
			<input name="cancel" value="<#Cancel#>" type="submit" class="btn" />
		</div>
	</div>
	{include file='block_form_footer.html'}
</form>
<div class="spacer"></div>
</div>
{elseif $registration == 'ok'}
<div class="divtable shade1">
	<div class="table-hdr">
		<h3><#User Registration Successful#></h3>
	</div>

	<div class="row-desc">
		<p><#Thank you for registering#></p>
		<p>
			{if $conf.registration == 'open'}
			<!--#REGISTRATION_OPEN_BLURB2#-->
			You are now logged in under your new user and can update your player profile by clicking on the 
			"Your Profile" link above
			{elseif $conf.registration == 'confirm'}
			<!--#REGISTRATION_CONFIRM_BLURB2#-->
			Your account is now pending and must be accepted by an administrator before you can login
			{elseif $conf.registration == 'autoconfirm'}
			<!--#REGISTRATION_AUTOCONFIRM_BLURB2#-->
			Your account is now pending and must be confirmed by logging into the game server and issuing the
			following command from the game console: <em>ps_confirm</em>
			{/if}
		</p>
		<p><a href="{url _base='index.php'}"><#Return to the index#></a></p>
	</div>
<div class="spacer"></div>
</div>
{else}
<div class="divtable shade1">
	<div class="table-hdr">
		<h3><#User Registration Failed#></h3>
	</div>
	<div class="row-desc">
		<!--#REGISTRATION_FAILED_BLURB#-->
		There was a fatal error with your user registration. Please try again later.
	</div>
<div class="spacer"></div>
</div>
{/if}

