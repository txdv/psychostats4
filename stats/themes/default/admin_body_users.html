<script language="javascript" type="text/javascript">
{include file="form_js.html"}
defaultTextStr = '<#Hover over labels for a description#>';
</script>

<div class="divtablewide shade1">
<form name="config" action="{url _base=$PHP_SELF c=$c}" method="POST">
<input name="ref" value="{$ref|escape}" type="hidden" />
<input name="submit" value="1" type="hidden" />
	<div class="table-hdr">
		<h3><#Users#></h3>
		<p>
		</p>
	</div>

	<div class="row-spacer" style="text-align: left">
		<div style="float: left">
		&nbsp;<#Filter#>: 
		<select name="acl" class="field">
			<option value="">- <#All#> -</option>
			<option value="{$ACL_NONE}" {if $acl == $ACL_NONE}selected{/if}><#No Access#></option>
			<option value="{$ACL_USER}" {if $acl == $ACL_USER}selected{/if}><#Normal User#></option>
			<option value="{$ACL_CLANADMIN}" {if $acl == $ACL_CLANADMIN}selected{/if}><#Clan Admin#></option>
			<option value="{$ACL_ADMIN}" {if $acl == $ACL_ADMIN}selected{/if}><#ADMIN#></option>
		</select>
		::
		<input name="filter" type="text" value="{$filter|escape}" size="10" class="field" />
		<input value="<#Go#>" type="submit" class="btn" />
{*
		&nbsp;|&nbsp;
		<input name="export" value="<#Export#>" type="submit" class="btn" onmouseover="statusText('<#Exports the filtered list as a CSV file for you to download#>')" onmouseout="notext()" /> 
		&nbsp;
		<input name="import" value="<#Import#>" type="submit" class="btn" onmouseover="statusText('<#Allows you to import (upload) a CSV file#>')" onmouseout="notext()" /> 
*}
		&nbsp;|&nbsp;
		<input name="new" value="<#New#>" type="submit" class="btn" />
		</div>
		<div style="float: right">{$pagerstr}&nbsp;&nbsp;</div>
		<div class="spacer"></div>
	</div>

{if $msg}
	<center><div id="msg-success" class="row row-err-success">{$msg|escape}</div></center>
	<div class="row-spacer"></div>
{/if}

	{if $pager}<div class="row" align="right">{$pagerstr}&nbsp;</div>{/if}	

<table width=100%" border="0" cellspacing="0" cellpadding="2">
	<tr>
		<td class="header-cell" align="center" onmouseover="statusText('{$form.username.statustext|escape:'quotes'}')" onmouseout="notext()"><#Username#></td>
		<td class="header-cell" align="center" onmouseover="statusText('{$form.name.statustext|escape:'quotes'}')" onmouseout="notext()"><#Player#></td>
		<td class="header-cell" align="center" onmouseover="statusText('{$form.accesslevel.statustext|escape:'quotes'}')" onmouseout="notext()"><#Access#></td>
		<td class="header-cell" align="center" onmouseover="statusText('{$form.confirmed.statustext|escape:'quotes'}')" onmouseout="notext()"><#Confirm#></td>
		<td class="header-cell" align="center" onmouseover="statusText('<#Select all visible users#> (<#You can not select yourself#>)')" onmouseout="notext()"><input name="deleteall" type="checkbox" onclick="toggleChecked(this.form,this.checked,'actionlist'); this.blur()" /></td>
	</tr>

{foreach name='users' from=$userlist item='u'}
	<tr class="{cycle values="odd,even"}">
		<td class="label" align="center"><a href="{url _base='edituser.php' id=$u.userid ref="`$REQUEST_URI`&filter=`$filter`&acl=`$acl`"}">{$u.username|escape}</a></td>
{if $u.plrid}
		<td class="text" align="center"><a href="{url _base='editplr.php' id=$u.plrid ref="`$REQUEST_URI`&filter=`$filter`&acl=`$acl`"}">{$u.name|escape}</a></td>
{else}
		<td class="text" align="center">-</td>
{/if}
		<td class="text" align="center">
			{if $u.accesslevel >= $ACL_ADMIN}
				<#Admin#>
			{elseif $u.accesslevel >= $ACL_CLANADMIN}
				<#Clan Admin#>
			{elseif $u.accesslevel >= $ACL_USER}
				<#User#>
			{else}
				<#No Access#>
			{/if}
	
		</td>
{if $u.confirmed}
		<td class="text" align="center" style="color: green"><#Yes#></td>
{else}
		<td class="text" align="center" style="color: red"><#No#></td>
{/if}
		<td class="text" align="center">
			<input id="actionlist{$smarty.foreach.users.index+1}" name="actionlist[]" value="{$u.userid}" type="checkbox" {if $user.userid == $u.userid}disabled{else}onclick="this.form.elements.deleteall.checked = false"{/if} />
		</td>
	</tr>
{foreachelse}
	<tr>
		<td colspan="5" class="label" align="center"><#No users found#></td>
	</tr>
{/foreach}

</table>
	<div class="row-spacer"></div>
	<div class="row">
		<div class="form-actions">
			<#With selected#>:
			<input name="delete" value="<#Delete#>" type="submit" class="btn" onclick="return window.confirm('<#Really delete selected users?#>')" />
			<input name="unconfirm" value="<#Unconfirm#>" type="submit" class="btn" />
			<input name="confirm" value="<#Confirm#>" type="submit" class="btn" />
		</div>
	</div>
	{include file='block_form_footer.html'}
</form>
<div class="spacer"></div>
</div>

